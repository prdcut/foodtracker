"use strict";(self["webpackChunkfoodtracker"]=self["webpackChunkfoodtracker"]||[]).push([[355],{9355:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("b-row",{staticClass:"d-flex justify-content-center h-100"},[t("b-col",{staticClass:"my-auto",attrs:{md:"4"}},[t("b-card",{attrs:{"border-variant":"primary"}},[t("b-row",[t("b-col",[t("b-alert",{staticClass:"p-1 text-center",attrs:{show:e.dismissCountDown,variant:"primary",fade:""},on:{dismissed:function(t){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v(" Wrong username or password! ")])],1)],1),t("b-row",[t("h1",{staticClass:"text-center text-primary display-1"},[e._v("Food Tracker")])]),t("b-row",{staticClass:"d-flex justify-content-center align-items-center"},[t("b-col",{attrs:{md:"9"}},[t("validation-observer",{scopedSlots:e._u([{key:"default",fn:function({handleSubmit:r,reset:a}){return[t("b-form",{staticClass:"h-100 mt-2",attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),r(e.login)},reset:function(e){return e.preventDefault(),a.apply(null,arguments)}}},[t("b-row",{attrs:{"align-v":"center"}},[t("b-col",{attrs:{sm:"3"}},[t("label",[e._v("Username")])]),t("b-col",[t("validation-provider",{attrs:{name:"Username",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(r){return[t("b-form-group",[t("b-form-input",{staticClass:"input",attrs:{id:"username",type:"text",autocomplete:"off",state:e.validationState(r)},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("b-form-invalid-feedback",[e._v(" "+e._s(r.errors.find((e=>!!e)))+" ")])],1)]}}],null,!0)})],1)],1),t("b-row",{attrs:{"align-v":"center"}},[t("b-col",{attrs:{sm:"3"}},[t("label",[e._v("Password")])]),t("b-col",[t("validation-provider",{attrs:{name:"Password",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(r){return[t("b-form-group",[t("b-form-input",{staticClass:"input",attrs:{id:"password",type:"password",autocomplete:"off",state:e.validationState(r)},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("b-form-invalid-feedback",[e._v(" "+e._s(r.errors.find((e=>!!e)))+" ")])],1)]}}],null,!0)})],1)],1),t("b-row",{staticClass:"d-flex justify-content-center align-items-center text-center"},[t("b-col",{attrs:{md:"9"}},[t("b-button",{staticClass:"d-block my-4 w-100 text-light",attrs:{variant:"primary",type:"submit"}},[e.loading?[t("b-spinner",{attrs:{small:""}})]:e._e(),e.loading?e._e():[e._v(" Login ")]],2),t("p",[e._v(" New here? "),t("b-link",{staticClass:"text-decoration-none text-primary",attrs:{to:"/register"}},[e._v("register")])],1)],1)],1)],1)]}}])})],1)],1)],1)],1)],1)},n=[],s=r(655),i=r(1929),o=r(5014),l=r(2954),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"apiService",{enumerable:!0,configurable:!0,writable:!0,value:new o.Z}),Object.defineProperty(t,"loading",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(t,"username",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(t,"password",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(t,"dismissSecs",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(t,"dismissCountDown",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(t,"showDismissibleAlert",{enumerable:!0,configurable:!0,writable:!0,value:!1}),t}return(0,s.ZT)(t,e),Object.defineProperty(t.prototype,"validationState",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.dirty,r=e.validated,a=e.valid;return t||r?a:null}}),Object.defineProperty(t.prototype,"countDownChanged",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.dismissCountDown=e}}),Object.defineProperty(t.prototype,"showAlert",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.dismissCountDown=this.dismissSecs}}),Object.defineProperty(t.prototype,"login",{enumerable:!1,configurable:!0,writable:!0,value:function(){return(0,s.mG)(this,void 0,void 0,(function(){var e,t;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:this.loading=!0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.apiService.login(this.username,this.password)];case 2:return e=r.sent(),e&&(localStorage.setItem("user",JSON.stringify(e.data.user.username)),localStorage.setItem("token",JSON.stringify(e.data.token)),this.$router.push({name:"dashboard"})),[3,4];case 3:return t=r.sent(),console.log(t),this.showAlert(),[3,4];case 4:return this.loading=!1,[2]}}))}))}}),t=(0,s.gn)([(0,i.wA)({components:{ValidationProvider:l.d_,ValidationObserver:l._j}})],t),t}(i.w3),c=u,d=c,b=r(1001),f=(0,b.Z)(d,a,n,!1,null,null,null),p=f.exports}}]);
//# sourceMappingURL=355.c4e0339b.js.map